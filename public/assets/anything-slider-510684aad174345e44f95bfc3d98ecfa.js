!function(t){t.anythingSlider=function(e,i){var o=this;o.$el=t(e).addClass("anythingBase").wrap('<div class="anythingSlider"><div class="anythingWindow" /></div>'),o.$el.data("AnythingSlider",o),o.init=function(){o.options=t.extend({},t.anythingSlider.defaults,i),t.isFunction(o.options.onBeforeInitialize)&&o.$el.bind("before_initialize",o.options.onBeforeInitialize),o.$el.trigger("before_initialize",o),o.$wrapper=o.$el.parent().closest("div.anythingSlider").addClass("anythingSlider-"+o.options.theme),o.$window=o.$el.closest("div.anythingWindow"),o.$controls=t('<div class="anythingControls"></div>').appendTo(null!==o.options.appendControlsTo&&t(o.options.appendControlsTo).length?t(o.options.appendControlsTo):o.$wrapper),o.win=window,o.$win=t(o.win),o.$nav=t('<ul class="thumbNav" />').appendTo(o.$controls),o.timer=null,o.flag=!1,o.playing=!1,o.hovered=!1,o.panelSize=[],o.currentPage=o.options.startPanel,o.adjustLimit=o.options.infiniteSlides?0:1,o.options.playRtl&&o.$wrapper.addClass("rtl"),o.original=[o.options.autoPlay,o.options.buildNavigation,o.options.buildArrows],o.updateSlider(),o.$currentPage=o.$items.eq(o.currentPage),o.$lastPage=o.$currentPage,o.runTimes=t("div.anythingSlider").index(o.$wrapper)+1,o.regex=new RegExp("panel"+o.runTimes+"-(\\d+)","i"),t.isFunction(t.easing[o.options.easing])||(o.options.easing="swing"),"default"===o.options.theme||t("link[href*="+o.options.theme+"]").length||t("body").append('<link rel="stylesheet" href="'+o.options.themeDirectory.replace(/\{themeName\}/g,o.options.theme)+'" type="text/css" />'),o.options.pauseOnHover&&o.$wrapper.hover(function(){o.playing&&(o.$el.trigger("slideshow_paused",o),o.clearTimer(!0))},function(){o.playing&&(o.$el.trigger("slideshow_unpaused",o),o.startStop(o.playing,!0))});var e=o.options.hashTags?o.gotoHash()||o.options.startPanel:o.options.startPanel;o.setCurrentPage(e,!1),o.slideControls(!1),o.$wrapper.bind("mouseenter mouseleave",function(t){o.hovered="mouseenter"===t.type?!0:!1,o.slideControls(o.hovered,!1)}),o.options.enableKeyboard&&t(document).keyup(function(t){if(o.$wrapper.is(".activeSlider"))switch(t.which){case 39:o.goForward();break;case 37:o.goBack()}});var n="slideshow_paused slideshow_unpaused slide_init slide_begin slideshow_stop slideshow_start initialized swf_completed".split(" ");t.each("onShowPause onShowUnpause onSlideInit onSlideBegin onShowStop onShowStart onInitialized onSWFComplete".split(" "),function(e,i){t.isFunction(o.options[i])&&o.$el.bind(n[e],o.options[i])}),t.isFunction(o.options.onSlideComplete)&&o.$el.bind("slide_complete",function(){setTimeout(function(){o.options.onSlideComplete(o)},0)}),o.$el.trigger("initialized",o)},o.updateSlider=function(){o.$el.find("li.cloned").remove(),o.$nav.empty(),o.$items=o.$el.find("> li"),o.pages=o.$items.length,o.options.resizeContents&&(o.options.width&&o.$wrapper.add(o.$items).css("width",o.options.width),o.options.height&&o.$wrapper.add(o.$items).css("height",o.options.height)),1===o.pages?(o.options.autoPlay=!1,o.options.buildNavigation=!1,o.options.buildArrows=!1,o.$controls.hide(),o.$nav.hide(),o.$forward&&o.$forward.add(o.$back).hide()):(o.options.autoPlay=o.original[0],o.options.buildNavigation=o.original[1],o.options.buildArrows=o.original[2],o.$controls.show(),o.$nav.show(),o.$forward&&o.$forward.add(o.$back).show()),o.buildNavigation(),o.options.autoPlay&&(o.playing=!o.options.startStopped,o.buildAutoPlay()),o.options.buildArrows&&o.buildNextBackButtons(),o.$el.prepend(o.options.infiniteSlides?o.$items.filter(":last").clone().addClass("cloned").removeAttr("id"):t('<li class="cloned" />')),o.$el.append(o.options.infiniteSlides?o.$items.filter(":first").clone().addClass("cloned").removeAttr("id"):t('<li class="cloned" />')),o.$el.find("li.cloned").each(function(){t(this).html(t(this).html().replace(/<a/gi,"<span").replace(/\/a>/gi,"/span>")),t(this).find("[id]").removeAttr("id")}),o.$items=o.$el.find("> li").addClass("panel"),o.setDimensions(),o.options.resizeContents||o.$win.load(function(){o.setDimensions()}),o.currentPage>o.pages&&(o.currentPage=o.pages,o.setCurrentPage(o.pages,!1)),o.$nav.find("a").eq(o.currentPage-1).addClass("cur"),o.hasEmb=o.$items.find("embed[src*=youtube]").length,o.hasSwfo="undefined"!=typeof swfobject&&swfobject.hasOwnProperty("embedSWF")&&t.isFunction(swfobject.embedSWF)?!0:!1,o.hasEmb&&o.hasSwfo&&o.$items.find("embed[src*=youtube]").each(function(e){var i="OBJECT"===t(this).parent()[0].tagName?t(this).parent():t(this);i.wrap('<div id="ytvideo'+e+'"></div>'),swfobject.embedSWF(t(this).attr("src")+"&enablejsapi=1&version=3&playerapiid=ytvideo"+e,"ytvideo"+e,i.attr("width"),i.attr("height"),"10",null,null,{allowScriptAccess:"always",wmode:o.options.addWmodeToObject,allowfullscreen:!0},{"class":i.attr("class"),style:i.attr("style")},function(){e>=o.hasEmb-1&&o.$el.trigger("swf_completed",o)})}),o.$items.find("a").unbind("focus").bind("focus",function(e){o.$items.find(".focusedLink").removeClass("focusedLink"),t(this).addClass("focusedLink");var i=t(this).closest(".panel");i.is(".activePage")||(o.gotoPage(o.$items.index(i)),e.preventDefault())})},o.buildNavigation=function(){o.options.buildNavigation&&o.pages>1&&o.$items.filter(":not(.cloned)").each(function(e){var i=e+1,n=(1===i?"first":"")+(i===o.pages?"last":""),a=t('<a href="#"></a>').addClass("panel"+i).wrap('<li class="'+n+'" />');if(o.$nav.append(a.parent()),t.isFunction(o.options.navigationFormatter)){var s=o.options.navigationFormatter(i,t(this));a.html(s),parseInt(a.css("text-indent"),10)<0&&a.addClass(o.options.tooltipClass).attr("title",s)}else a.text(i);a.bind(o.options.clickControls,function(t){!o.flag&&o.options.enableNavigation&&(o.flag=!0,setTimeout(function(){o.flag=!1},100),o.gotoPage(i),o.options.hashTags&&o.setHash(i)),t.preventDefault()})})},o.buildNextBackButtons=function(){o.$forward||(o.$forward=t('<span class="arrow forward"><a href="#">'+o.options.forwardText+"</a></span>"),o.$back=t('<span class="arrow back"><a href="#">'+o.options.backText+"</a></span>"),o.$back.bind(o.options.clickArrows,function(t){o.goBack(),t.preventDefault()}),o.$forward.bind(o.options.clickArrows,function(t){o.goForward(),t.preventDefault()}),o.$back.add(o.$forward).find("a").bind("focusin focusout",function(){t(this).toggleClass("hover")}),o.$wrapper.prepend(o.$forward).prepend(o.$back),o.$arrowWidth=o.$forward.width())},o.buildAutoPlay=function(){o.$startStop||(o.$startStop=t("<a href='#' class='start-stop'></a>").html(o.playing?o.options.stopText:o.options.startText),o.$controls.prepend(o.$startStop),o.$startStop.bind(o.options.clickSlideshow,function(t){o.options.enablePlay&&(o.startStop(!o.playing),o.playing&&(o.options.playRtl?o.goBack(!0):o.goForward(!0))),t.preventDefault()}).bind("focusin focusout",function(){t(this).toggleClass("hover")}),o.startStop(o.playing))},o.setDimensions=function(){var e,i,n,a,s,r=0,l=o.$window.width(),d=o.$win.width();o.$items.each(function(p){n=t(this).children("*"),o.options.resizeContents?(e=parseInt(o.options.width,10)||l,i=parseInt(o.options.height,10)||o.$window.height(),t(this).css({width:e,height:i}),1===n.length&&(n.css({width:"100%",height:"100%"}),"OBJECT"===n[0].tagName&&n.find("embed").andSelf().attr({width:"100%",height:"100%"}))):(e=t(this).width(),s=e>=d?!0:!1,1===n.length&&s&&(a=n.width()>=d?l:n.width(),t(this).css("width",a),n.css("max-width",a),e=a),e=s?o.options.width||l:e,t(this).css("width",e),i=t(this).outerHeight(),t(this).css("height",i)),o.panelSize[p]=[e,i,r],r+=e}),o.$el.css("width",r<o.options.maxOverallWidth?r:o.options.maxOverallWidth)},o.gotoPage=function(t,e,i){1!==o.pages&&(o.$lastPage=o.$items.eq(o.currentPage),"number"!=typeof t&&(t=o.options.startPage,o.setCurrentPage(o.options.startPage)),o.hasEmb&&o.checkVideo(o.playing)||(t>o.pages+1-o.adjustLimit&&(t=o.options.infiniteSlides||o.options.stopAtEnd?o.pages:1),t<o.adjustLimit&&(t=o.options.infiniteSlides||o.options.stopAtEnd?1:o.pages),o.$currentPage=o.$items.eq(t),o.currentPage=t,o.$el.trigger("slide_init",o),o.slideControls(!0,!1),e!==!0&&(e=!1),(!e||o.options.stopAtEnd&&t===o.pages)&&o.startStop(!1),o.$el.trigger("slide_begin",o),o.options.resizeContents||o.$wrapper.filter(":not(:animated)").animate({width:o.panelSize[t][0],height:o.panelSize[t][1]},{queue:!1,duration:o.options.animationTime,easing:o.options.easing}),o.$window.filter(":not(:animated)").animate({scrollLeft:o.panelSize[t][2]},{queue:!1,duration:o.options.animationTime,easing:o.options.easing,complete:function(){o.endAnimation(t,i)}})))},o.endAnimation=function(e,i){if(0===e?(o.$window.scrollLeft(o.panelSize[o.pages][2]),e=o.pages):e>o.pages&&(o.$window.scrollLeft(o.panelSize[1][2]),e=1),o.setCurrentPage(e,!1),o.$items.removeClass("activePage").eq(e).addClass("activePage"),o.hovered||o.slideControls(!1),o.hasEmb){var n=o.$currentPage.find("object[id*=ytvideo], embed[id*=ytvideo]");n.length&&t.isFunction(n[0].getPlayerState)&&n[0].getPlayerState()>0&&5!==n[0].getPlayerState()&&n[0].playVideo()}o.$el.trigger("slide_complete",o),"function"==typeof i&&i(o),o.options.autoPlayLocked&&!o.playing&&setTimeout(function(){o.startStop(!0)},o.options.resumeDelay-o.options.delay)},o.setCurrentPage=function(e,i){e>o.pages+1-o.adjustLimit&&(e=o.pages-o.adjustLimit),e<o.adjustLimit&&(e=1),o.options.buildNavigation&&(o.$nav.find(".cur").removeClass("cur"),o.$nav.find("a").eq(e-1).addClass("cur")),!o.options.infiniteSlides&&o.options.stopAtEnd&&(o.$wrapper.find("span.forward")[e===o.pages?"addClass":"removeClass"]("disabled"),o.$wrapper.find("span.back")[1===e?"addClass":"removeClass"]("disabled"),e===o.pages&&o.playing&&o.startStop()),i||(o.$wrapper.css({width:o.panelSize[e][0],height:o.panelSize[e][1]}),o.$wrapper.scrollLeft(0),o.$window.scrollLeft(o.panelSize[e][2])),o.currentPage=e,o.$wrapper.is(".activeSlider")||(t(".activeSlider").removeClass("activeSlider"),o.$wrapper.addClass("activeSlider"))},o.goForward=function(t){t!==!0&&(t=!1,o.startStop(!1)),o.gotoPage(o.currentPage+1,t)},o.goBack=function(t){t!==!0&&(t=!1,o.startStop(!1)),o.gotoPage(o.currentPage-1,t)},o.gotoHash=function(){var t=o.win.location.hash.match(o.regex);return null===t?"":parseInt(t[1],10)},o.setHash=function(t){var e="panel"+o.runTimes+"-",i=o.win.location.hash;"undefined"!=typeof i&&(o.win.location.hash=i.indexOf(e)>0?i.replace(o.regex,e+t):i+"&"+e+t)},o.slideControls=function(t){var e=t?"slideDown":"slideUp",i=t?0:o.options.animationTime,n=t?o.options.animationTime:0,a=t?0:1;o.options.toggleControls&&o.$controls.stop(!0,!0).delay(i)[e](o.options.animationTime/2).delay(n),o.options.buildArrows&&o.options.toggleArrows&&(!o.hovered&&o.playing&&(a=1,n=0),o.$forward.stop(!0,!0).delay(i).animate({right:a*o.$arrowWidth,opacity:n},o.options.animationTime/2),o.$back.stop(!0,!0).delay(i).animate({left:a*o.$arrowWidth,opacity:n},o.options.animationTime/2))},o.clearTimer=function(t){o.timer&&(o.win.clearInterval(o.timer),t||o.$el.trigger("slideshow_stop",o))},o.startStop=function(t,e){t!==!0&&(t=!1),t&&!e&&o.$el.trigger("slideshow_start",o),o.playing=t,o.options.autoPlay&&(o.$startStop.toggleClass("playing",t).html(t?o.options.stopText:o.options.startText),parseInt(o.$startStop.css("text-indent"),10)<0&&o.$startStop.addClass(o.options.tooltipClass).attr("title",t?"Stop":"Start")),t?(o.clearTimer(!0),o.timer=o.win.setInterval(function(){o.hasEmb&&o.checkVideo(t)||(o.options.playRtl?o.goBack(!0):o.goForward(!0))},o.options.delay)):o.clearTimer()},o.checkVideo=function(e){var i,n,a=!1;return o.$items.find("object[id*=ytvideo], embed[id*=ytvideo]").each(function(){i=t(this),i.length&&t.isFunction(i[0].getPlayerState)&&(n=i[0].getPlayerState(),e&&(1===n||n>2)&&o.$items.index(i.closest("li.panel"))===o.currentPage&&o.options.resumeOnVideoEnd?a=!0:n>0&&i[0].pauseVideo())}),a},o.init()},t.anythingSlider.defaults={width:null,height:null,resizeContents:!0,tooltipClass:"tooltip",theme:"default",themeDirectory:"css/theme-{themeName}.css",startPanel:1,hashTags:!0,infiniteSlides:!0,enableKeyboard:!0,buildArrows:!0,toggleArrows:!1,buildNavigation:!0,enableNavigation:!0,toggleControls:!1,appendControlsTo:null,navigationFormatter:null,forwardText:"&raquo;",backText:"&laquo;",enablePlay:!0,autoPlay:!0,autoPlayLocked:!1,startStopped:!1,pauseOnHover:!0,resumeOnVideoEnd:!0,stopAtEnd:!1,playRtl:!1,startText:"Start",stopText:"Stop",delay:3e3,resumeDelay:15e3,animationTime:600,easing:"swing",clickArrows:"click",clickControls:"click focusin",clickSlideshow:"click",addWmodeToObject:"opaque",maxOverallWidth:32766},t.fn.anythingSlider=function(e,i){return this.each(function(){var o=t(this).data("AnythingSlider");if((typeof e).match("object|undefined"))o?o.updateSlider():new t.anythingSlider(this,e);else if(/\d/.test(e)&&!isNaN(e)&&o){var n="number"==typeof e?e:parseInt(t.trim(e),10);n>=1&&n<=o.pages&&o.gotoPage(n,!1,i)}})}}(jQuery);